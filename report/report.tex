\documentclass[12pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{siunitx}
\sisetup{binary-units=true,per-mode=symbol}
\usepackage{hyperref,ulem,setspace}
\usepackage[labelfont=bf]{caption,subcaption}
\usepackage{graphicx,pgfplots,pgf-pie}
\usepackage{multicol}
\usepackage{minted}
\usepackage[german]{babel}
\usepackage{german}
\pgfplotsset{compat=1.9}
\normalem
\parindent 9pt
\newcommand{\rom}[1]{\uppercase\expandafter{\romannumeral #1\relax}}
\title{Institutsprojekt: Optischer Link}
\author{Raphael Brandis \and Kevin Läufer}
\date{\today}

\begin{document}
\begin{titlepage}
\begin{center}

% Upper part of the page. The '~' is needed because \\
% only works if a paragraph has started.
\includegraphics[width=0.7\textwidth]{../iph_logo.png}~\\[1cm]

\textsc{\LARGE Institut für integrierte Photonik}\\[0.5cm]

\textsc{\Large der}\\[0.5cm]

\textsc{\LARGE RWTH Aachen University}\\[1.5cm]


\textsc{\Large Institutsprojekt}\\[0.5cm]

% Title
\rule{\linewidth}{0.5mm} \\[0.4cm]
{ \huge \bfseries Optischer Link \\[0.4cm] }

\rule{\linewidth}{0.5mm} \\[1.5cm]

% Author and supervisor
\begin{minipage}{0.4\textwidth}
\begin{flushleft} \large
\emph{Teilnehmer:}\\
Raphael \textsc{Brandis}\\
Kevin \textsc{Läufer}
\end{flushleft}
\end{minipage}
\begin{minipage}{0.4\textwidth}
\begin{flushright} \large
\emph{Betreuer:} \\
Johannes \textsc{Hauck}
\end{flushright}
\end{minipage}

\vfill

% Bottom of the page
{\large \today}

\end{center}
\end{titlepage}


%\maketitle
%\vfill

\tableofcontents
\newpage

\section{Aufgabenstellung}
Wir sind Studenten der Elektrotechnik an der RWTH Aachen und haben unser Viertsemester-Institutsprojekt am Institut für Integrierte Photonik (IPH) absolviert. Im Rahmen dieses Projekts haben wir uns mit der Übertragung von Informationen über optische Links beschäftigt.

Im ersten von zwei Projektabschnitten ging es zunächst um Informationsübermittlung mittels eines extern modulierten Laserstrahls. Anschließend sollte im zweiten Teil des Projekts eine Laserdiode direkt moduliert und auf diese Weise digitale Daten übertragen werden.


\section{Extern modulierter Laser}
Um mit einem mit konstanter Intensität strahlenden Laser Informationen zu übertragen, muss mindestens ein Parameter des Laserstrahls extern moduliert werden. Mögliche Modulationsparameter sind beispielsweise die Amplitude oder die Phase des Strahls. In unseren Versuchen kam ausschließlich Amplitudenmodulation zum Einsatz.

Wenn die Amplitude eines Laserstrahls extern moduliert werden soll, sind wiederum verschiedene Aufbauten als Modulator denkbar. Ein Lautsprecher mit einem in der Mitte der Membran angebrachten kleinen Spiegel kann je nach Auslenkung der Membran die Intensität des auf der Photodiode des Empfängers auftreffenden Lichts verändern; mit dieser Technik hat sich eine zweite Projektgruppe genauer beschäftigt. Wir haben uns stattdessen für die Variante entschieden, bei der ein einzelner LCD-Pixel\footnote{engl. \textit{liquid crystal display}} zum Einsatz kommt.

\subsection{LCD-Modul als Modulator}
Ein einzelner Pixel eines LCD besteht üblicherweise aus einer Flüssigkristallschicht, an die über zwei Elektroden ein elektrisches Feld angelegt werden kann, sowie einem horizontalen und einem vertikalen Polarisationsfilter, je einer vor und einer hinter der Kristallschicht.

Wären die Flüssigkristalle nicht vorhanden, würden beide Polarisationsfilter zusammen das gesamte einfallende Licht herausfiltern. Die zusätzliche Kristallschicht zwischen beiden Filtern sorgt jedoch für eine Drehung der Polarisation des durch den ersten Filter polarisierten Lichts. Da sich die Ausrichtung der Kristalle über das angelegte Feld beziehungsweise über die angelegte Spannung steuern lässt, lässt sich somit auch die Menge des insgesamt durchgelassenen Lichts steuern.

Da in unseren Versuchsaufbauten eine Laserdiode als Lichtquelle diente, war das in den Modulator einfallende Licht bereits polarisiert. Der von uns verwendete LCD-Pixel musste daher nur über einen Polarisationsfilter hinter der Kristallschicht verfügen.

\subsubsection{Übertragungscharakteristik}
\label{sec:lcd_transfer_characteristics}

Um das Übertragungsverhalten des LCD-Modulators zu ermitteln, haben wir zunächst einen sehr einfachen Versuchsaufbau verwendet: Der Modulator wurde direkt an einen Signalgenerator angeschlossen, als Empfänger diente eine kommerziell erhältliche Photodiode mit integrierter Biasspannung. Mit dem Oszilloskop konnten wir nun die Amplitude des empfangenen Signals bei Übertragung von Sinusschwingungen verschiedener Frequenzen messen.

\begin{figure}[H]
  \centering
    \begin{tikzpicture}
      \begin{semilogxaxis}[
        log ticks with fixed point,
        xlabel={Frequenz [Hz]},
        ylabel={Spannung [dB]},
        xmin=9.1,
        xmax=1200,
        ymin=0,
        ymax=66,
        width=0.94\textwidth,
        height=0.57\textwidth,
        axis x line=bottom,
        axis y line=left
      ]
      \addplot+[smooth] table [x=f, y=u_db, col sep=comma] {2.1_lcd_sweep_data.csv};
      \end{semilogxaxis}
    \end{tikzpicture}
  \caption{Übertragungscharakteristik des LCD-Modulators (Trägerfrequenz: \SI{100}{\kilo\hertz}, Amplitude: $\pm$\SI{6}{\volt})}
  \label{fig:lcd_transfer_function}
\end{figure}

In unseren Messungen fiel die Amplitude schon im niedrigen zweistelligen Frequenzbereich stark ab. Bei einer von \SI{10}{\hertz} ausgehenden Messreihe war der \SI{-3}{\decibel}-Punkt bereits bei cirka \SI{20}{\hertz} erreicht. Durch Verwendung einer hochfrequenten Trägerwelle, die mit dem niederfrequenten Nutzsignal amplitudenmoduliert wurde\footnote{Diese Funktion stellte der verwendete Signalgenerator von Haus aus bereit.}, ließ sich das Übertragungsverhalten geringfügig verbessern (siehe Abbildung \ref{fig:amplitude_modulation}). Insgesamt mussten wir dennoch feststellen, dass sich der von uns verwendete LCD-Pixel aufgrund seiner geringen Geschwindigkeit nur eingeschränkt als Modulator zur Informationsübertragung eignet (siehe Frequenzgang in Abbildung \ref{fig:lcd_transfer_function}).

\begin{figure}[H]
  \centering
    \includegraphics[width=0.7\textwidth]{../measurements/20140522_sweep/scope_1.png}
  \caption{Blau: AM-modulierte Trägerwelle, Rosa: Empfangenes Signal}
  \label{fig:amplitude_modulation}
\end{figure}


\subsection{Übertragung von Audiosignalen}

Im nächsten Schritt sollten statt einfachen Sinussignalen, die sich direkt im Signalgenerator erzeugen lassen, komplexere Audiosignale mithilfe unseres analogen Links übertragen werden --- beispielsweise Musik.

Aufgrund der in Abschnitt \ref{sec:lcd_transfer_characteristics} erläuterten Versuchsergebnisse war es unser Ziel, den Modulator weiterhin mit einer hochfrequenten, amplitudenmodulierten Trägerwelle anzusteuern. Da der Modulationseingang des Signalgenerators nach einem Pegel von $\pm$\SI{5}{\volt} verlangte, haben wir zunächst auf dem Breadboard eine diskrete Kopfhörerverstärkerschaltung aufgebaut, die das aus einem Smartphone oder einem Computer kommende Musiksignal auf den nötigen Pegel verstärkt.

Auf der Empfängerseite kam eine ebenfalls diskret aufgebaute Transimpedanzverstärkerschaltung zum Einsatz, an die zwei aktive Lautsprecher angeschlossen wurden. Der Aufbau aus Laserdiode, LCD-Modulator und Photodiode mit Transimpedanzverstärker ist in Abbildung \ref{fig:photo_lcd_experiment} zu sehen.

\begin{figure}[H]
  \centering
    \includegraphics[width=\textwidth]{img/photo_lcd_experiment.jpg}
  \caption{Versuchsaufbau zur Übertragung von Audiosignalen}
  \label{fig:photo_lcd_experiment}
\end{figure}

War bei der Übertragung einzelner Sinustöne der Ton noch bis in hohe Frequenzbereiche ($>$\SI{10}{\kilo\hertz}) hörbar, so verschlechterte sich das Übertragungsverhalten für breitbandige Musiksignale sehr stark. Erst durch eine Bandbreitenbegrenzung der Musik auf Frequenzen bis maximal \SI{750}{\hertz} wurden einzelne Basstöne aus dem Ursprungssignal erkennbar, die jedoch weiterhin von starken Störgeräuschen und Verzerrungen begleitet wurden.

\begin{figure}[H]
  \centering
  \begin{subfigure}[b]{1.0\textwidth}
    \includegraphics[width=\textwidth]{../audacity_sent.png}
    \caption{Bandbreitenbegrenztes Ursprungssignal}
    \label{fig:audacity_sent}
  \end{subfigure}  
  \begin{subfigure}[b]{1.0\textwidth}
    \includegraphics[width=\textwidth]{../audacity_received.png}
    \caption{Mit einem Mikrofon aufgezeichnete Ausgabe der Lautsprecher}
    \label{fig:audacity_received}
  \end{subfigure}  
  \caption{Übertragung eines Musiksignals}
  \label{fig:audacity}
\end{figure}

In Abbildung \ref{fig:audacity} ist die geringe Übereinstimmung der Wellenformen des zu übertragenden Musiksignals (\ref{fig:audacity_sent}) und des aus den Lautsprechern zu hörenden Signals (\ref{fig:audacity_received}) zu erkennen.

Auch bei reinen Sprachsignalen reichte die Übertragungsqualität bei weitem nicht aus, um Sprachverständlichkeit zu gewährleisten.

\subsection{Übertragung digitaler Daten}
Nach den Experimenten mit der analogen Signalübertragung, war es von Interesse auch einmal digitale Daten zu übertragen.

\subsubsection{USB zu UART Dongle}
Als erster Ansatz wurden günstige UART \footnote{Universal Asynchronous Transmitter/Receiver} zu USB Adapter benutzt. Diese benutzen \SI{3.3}{\volt}  CMOS Signale, welche mittels eines Komparators auf $\pm$\SI{5}{\volt} Pegel gebracht werden. Mit diesem Pegel kann man direkt auf den Eingang des \textit{DG1022} Signalgenerators von Rigol geben. Bei Amplitudenmodulation führen dann +\SI{5}{\volt} zur maximalen Amplitude und -\SI{5}{\volt}  zu einer Amplitude von fast Null. So ließ sich ein einfaches On-Off Keying umsetzen. Leider war es nicht möglich bei dem UART Adapter Baudraten unter \SI{1}{\kilo\hertz} einzustellen.

Dies war aber deutlich zu schnell, für das LCD, wie man in der Abbildung~\ref{fig:uart_continous_key} sehen kann. Hier wurde eine Taste im Terminal gedrückt gehalten um immer den gleichen Wert zu senden. Man beachte, dass bei dieser und allen folgenden Messungen der grüne Kanal, also die Messung am Ausgang des Transimpedanzverstärkers, auf AC Coupling eingestellt war. Somit sind die Messergebnisse nicht wirklich verlässlich und es lassen sich höchstens Tendenzen feststellen. Hier wäre es interessant diese Messungen noch einmal mit richtigen Einstellungen zu wiederholen.

Man sieht aber, dass ein kurzes \textit{High} am Ausgang des UART Adapters (blauer Kanal) zu wenig Änderung am Ausgang des Transimpedanzverstärkers führt. Das LCD kann wohl dem Signal nicht folgen.


\begin{figure}[H]
  \centering
    \includegraphics[width=\textwidth]{../measurements/20140610/uart_continous_key/scope_0.png}
  \caption{Hier wird kontinuierlich der gleiche Wert mittels UART gesendet.}
  \label{fig:uart_continous_key}
\end{figure}

\subsubsection{10 Hz Daten}
Nachdem die UART Daten viel zu schnell waren, wurde als nächstes der Signalgenerator benutzt um Bitsequenzen mit \SI{10}{\hertz} zu erzeugen. Diese wurden ebenfalls mittels On-Off Keying an das LCD gebracht. Interessant ist hierbei der Unterschied zwischen einem determinierten Muster aus sich abwechselnden Nullen und Einsen und einem Zufallsmuster. Wie in Abbildung~\ref{fig:uart_10hz} gut zu sehen ist, kann sich das LCD auf eine konstante Frequenz einschwingen. Bei einem Zufallssignal dagegen hängt das Signal von der Vorgeschichte ab. Hier ist gut zu sehen, warum man bei einer Messung, wie z.B. der Erstellung von Augendiagrammen (siehe \ref{sec:eye_diag}) ein Zufallssignal verwendet werden sollte und ein deterministisches Signal nicht ausreicht.

\begin{figure}[H]
  \centering
  \begin{subfigure}[b]{0.6\textwidth}
    \includegraphics[width=\textwidth]{../measurements/20140610/10Hz_toggle/scope_6.png}
    \caption{toggle}
    \label{fig:uart_10hz_toggle}
  \end{subfigure}
  \begin{subfigure}[b]{0.6\textwidth}
    \includegraphics[width=\textwidth]{../measurements/20140610/10Hz_random/scope_4.png}
    \caption{zufällig}
    \label{fig:uart_10hz_random}
  \end{subfigure}
  \caption{\SI{10}{\hertz} Signal}
  \label{fig:uart_10hz}
\end{figure}

\subsubsection{Software UART mit Mikrocontroller}
Um nun endlich digitale Daten zu übertragen, wurde auf einem Mikrocontroller UART mittels Software implementiert, wodurch sich dessen Baudrate beliebig langsam machen lässt. Hierzu wurde ein STM32F4 und ein STM32F3 Discovery Board verwendet. Der Quellcode benutzt die XPCC Bibliothek und auf \url{http://github.com/ekiwi/iph} zu finden. Die wichtigsten funktionalen Bestandteile sind aber auch im Anhang~\ref{app:code} zu finden.

Der Versuchsaufbau ist in Abbildung~\ref{fig:sotware_uart_signal_chain} zu sehen. Die Signalkette entspricht der, die beim ersten Versuch mit den UART Adaptern benutzt wurde.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{img/software_uart.pdf}
  \caption{Software UART Signalkette}
  \label{fig:sotware_uart_signal_chain}
\end{figure}

Zur Verbesserung der Robustheit der Übertragung kam ein Hamming (7,4) Code zum Einsatz, bei dem alle Codewörter einen Hammingabstand von mindestens drei haben. Damit kommen auf vier Datenbits drei Paritätsbits. Dies erlaubt die Korrektur von einfachen Bitfehlern. Ein einfacher Algorithmus hierfür sieht wie folgt aus (siehe auch Quellcode in Anhang~\ref{app:code_hamming}):

Für ein Empfangenes Wort, wird der Hammingabstand zu jedem möglichen Codewort errechnet. Ist dieser eins oder null, wird davon ausgegangen, das das empfangene Wort dem Codewort entspricht. Dies Erlaubt somit die Korrektur einfacher Bitfehler, führt bei zweifachen Bitfehlern jedoch zu einer falschen Zuordnung. Da nämlich der minimale Hammingabstand zwischen gültigen Codeworten drei ist und bei zwei Bitfehler, der Hammingabstand zum ursprünglichen Codewort zwei ist, gibt es ein anderes Codewort, zu dem die Empfangene Sequenz nur einen Hammingabstand von eins hat. Diesem wird dann das empfangene Codewort, fälschlicher Weise, zugeordnet.

Zum Test der Übertragung wurden 294 Datenwörter in Hamming (7,4) Codierung übertragen. Die Signalkette entsprach hierbei der in Abbildung~\ref{fig:sotware_uart_signal_chain} gezeigten. Die Positionierung des Lasers und der Empfängerdiode der in Abbildung~\ref{fig:photo_lcd_experiment} gezeigten. Der Inhalt der Datenpakete waren die Zahlen von 0 bis 15. Dies reduziert die Aussagekraft des Experiments etwas im Vergleich zu randomisierten Daten, machte aber die Auswertung um einiges leichter. Denn um zwei Bitfehler oder mehr zu erkennen, bei denen ja, wie oben beschrieben, der falsche Wert empfangen wird, müssen die gesendeten Daten am Empfänger bekannt sein. Somit gelangten wir zu der in Abbildung~\ref{fig:sotware_uart_errors} dargestellten Fehlerverteilung.

\begin{figure}[H]
  \centering
    \begin{tikzpicture}
    \pie[explode=0.1,color={green,yellow,orange}]{26/0 Fehler, 62/1 Fehler, 12/2+ Fehler}
    \end{tikzpicture}
  \caption{Fehler bei der Übertragung von 294 Hamming (7,4) codierten, deterministischen Datenworten mit einem \SI{4}{\hertz} UART Signal}
  \label{fig:sotware_uart_errors}
\end{figure}

Somit sind, nach Fehlerkorrektur durch den Hammingcode, immer noch zwölf Prozent der empfangenen Daten falsch und müssten in einem echten Übertragungssystem durch höhere Layer abgefangen werden. Die Rate der Datenbits berechnet sich wie folgt:

\begin{equation}
 \SI{4}{\bit\per\second} * \frac{\SI{4}{\bit}}{\SI{7}{\bit}} \approx \SI{2.3}{\bit\per\second}
\end{equation}

Somit wurden über etwa \SI{30}{\centi\meter} mit \SI{2.3}{\bit\per\second} und einer recht hohen Fehlerrate von \SI{12}{\percent} Daten übertragen. Kein wirklich gutes Ergebnis.

Aber warum ist das so? Für eine Erklärungsversuch lohnt es sich die Beobachtungen in Abbildung~\ref{fig:uart_4hz_edge} zu betrachten. Hier sieht man, dass eine zufällig ausgewählte steigende Flanke (\ref{fig:uart_4hz_rising_edge})  \SI{162}{\milli\second} benötigte um durch das System zu propagieren. Eine fallende Flanke (\ref{fig:uart_4hz_falling_edge}) hatte mit \SI{20}{\milli\second} eine deutlich kleinere Verzögerung. Weitere beobachtete Flanken wiesen Verzögerungen in der gleichen Größenordnung, wie die hier dokumentierten, auf

Da, bei einem zufälligen Bit, eine steigende Flanke sowohl an dessen Anfang als auch an dessen Ende auftreten kann, müsste man, um sicher zu gehen mindestens wta \SI{162}{\milli\second} nach Anfang und etwa \SI{162}{\milli\second} vor Ende eines Bits sampeln um Fehler zu vermeiden. Dies führt zu Folgender maximaler Datenrate:

\begin{equation}
	T_{min} = \SI{162}{\milli\second} * 2 = \SI{324}{\milli\second}
\end{equation}
\begin{equation}
	f_{max} = \frac{1}{T_{min}} = \frac{1}{\SI{324}{\milli\second}} \approx \SI{3}{\bit\per\second}
\end{equation}

Somit könnte ein Absenken der Bitrate auf \SI{3}{\bit\per\second} in Kombination mit einer intelligenten Wahl des Samplingzeitpunktes eine Hammingcodierung überflüssig machen und somit zu einer höheren Datenrate führen. Hierfür müssen aber die Latenzen bekannt sein und bei der Synchronisation durch die erste fallende Flanke (siehe Anhang~\ref{app:uart_receiver} Zeile 39) miteinbezogen werden.

Bei einem Test wurde, ohne Kenntnis der Latenz, mit einer Datenrate von \SI{2}{\bit\per\second} übertragen. Hierbei traten fast keine Bitfehler auf.

\begin{figure}[H]
  \centering
  \begin{subfigure}[b]{0.6\textwidth}
    \includegraphics[width=\textwidth]{../measurements/20140611/4Hz_rising_edge/scope_2.png}
    \caption{steigende Flanke: \SI{162}{\milli\second}}
    \label{fig:uart_4hz_rising_edge}
  \end{subfigure}
  \begin{subfigure}[b]{0.6\textwidth}
    \includegraphics[width=\textwidth]{../measurements/20140611/4Hz_falling_edge/scope_6.png}
    \caption{fallende Flanke: \SI{20}{\milli\second}}
    \label{fig:uart_4hz_falling_edge}
  \end{subfigure}
  \caption{Verzögerung bei einem \SI{4}{\hertz} UART Signal; Quellensignal in gelb und invertiertes Ausgangssignal in grün}
  \label{fig:uart_4hz_edge}
\end{figure}

Mit oben genannten Berechnungen ist aber nur eine maximale theoretische Datenrate von etwa \SI{3}{\bit\per\second} möglich. Interessant wäre es daher die Ursache der Latenz zu untersuchen. Hierbei sollte bei verschiedenen Ansteuerungsarten des LCD die erzielte Latenz gemessen werden. Mit den oben genannten Berechnungen lässt sich daraus die mögliche Datenrate berechnen.

\section{Direkt modulierter Laser}
Im zweiten Teil des Projekts sollte ein Diodenlaser direkt moduliert werden, um damit digitale Daten zu übertragen. Dazu hatte die andere Gruppe bereits eine Modulationsmethode untersucht, bei der auf einen konstanten Strom ein Datensignal aufgekoppelt wurde.

Unser Ziel war es, eine Stromquelle direkt mit einem Datensignal zu modulieren und danach Empfängerdesigns zu evaluieren.


\subsection{Sender: modulierte Konstantstromquelle}
\label{sec:direct_tx}
Auf Grund der exponentiellen Kennlinie einer Laserdiode muss diese mit einem konstanten Strom versorgt werden. Eine einfache Konstantstromquelle kann mit zwei Bipolartransisoren aufgebaut werden. Der Strom $I_{D1}$ , der durch die Diode fließt entspricht hierbei in etwa dem Strom $I_{R1}$, der durch den Widerstand $R1$ fließt. An diesem müssen, durch den Transistor  $Q2$ vorgegeben, etwa \SI{0.7}{\volt} abfallen, wodurch sich ungefähr folgender Strom einstellt:

\begin{equation}
I_{D1} = I_{R1} = \frac{U_{R1}}{R1} \approx \frac{\SI{0.7}{\volt}}{R1}
\end{equation}

Diese Quelle lässt sich leicht ein und aus schalten in dem - über einen Widerstand - die Kollektor-Emitter-Spannung $U_{CE2}$ des Transistor $Q2$ vorgegeben wird. Dieser Aufbau ist in Abbildung~\ref{fig:modulated_current_source} zu sehen.

\begin{figure}[H]
  \centering
    \includegraphics[width=0.8\textwidth]{../spice/modulated_current_source.png}
  \caption{Modulierte Stromquelle.}
  \label{fig:modulated_current_source}
\end{figure}

\begin{figure}[H]
  \centering
    \includegraphics[width=1.0\textwidth]{../spice/current_input_v_current_out_trans.png}
  \caption{Transientenanalyse der modulierten Stromquelle.}
  \label{fig:modulated_current_source_plot}
\end{figure}


Eine Simulation des Aufbaus in LTSpice zeigt, dass der Strom $I_{D1}$ durch die Diode von der Eingangsspannung $U_2$ abhängt. Die in Abbildung~\ref{fig:modulated_current_source_plot} dargestellten Ergebnisse wurde aber mit einem vereinfachten Transistormodell simuliert, sind also mit Vorsicht zu genießen. Das Prinzip wird darin aber gut veranschaulicht.

\begin{figure}[H]
  \centering
    \includegraphics[width=1.0\textwidth]{img/ring_20MHz.png}
  \caption{Reflexionen bei einem \SI{20}{\mega\hertz} Eingangssignal.}
  \label{fig:ring_20mhz}
\end{figure}

Mit diesem Aufbau ließen sich recht schnelle Übertragungen von zufälligen Bits realisieren (siehe auch Abschnitt~\ref{sec:direct_rx}). Es gab jedoch, auf Grund der fehlenden Terminierung auf der Eingangsseite unserer Schaltung, Probleme mit Reflexionen auf der Leitung (siehe Abbildung~\ref{fig:ring_20mhz}). Hier wäre eine Untersuchung verschiedener Terminierungsvarianten interessant. Auch verhält sich die Schaltung bei Frequenzen im Megahertzbereich nicht genauso wie in der Simulation, so entspricht die Spannung am Widerstand $R1$ nicht den erwarteten \SI{0.7}{\volt}. Hier wären eine Verbesserung der Spice Simulation durch die Auswahl eines passenden Transistormodells und bessere Modellierung der Quelle sowie weitere empirische Versuche angebracht.

\subsection{Photodiode mit Lastwiderstand als Empfänger}
\label{sec:direct_rx}

\begin{figure}[H]
  \centering
  \begin{subfigure}[b]{0.6\textwidth}
    \includegraphics[width=\textwidth]{../measurements/20140703/20kHz_10kOhm/scope_2.png}
    \caption{\SI{10}{\kilo\ohm}}
    \label{fig:direct_rx_10k_R}
  \end{subfigure}  
  \begin{subfigure}[b]{0.6\textwidth}
    \includegraphics[width=\textwidth]{../measurements/20140703/20kHz_50_Ohm/scope_0.png}
    \caption{\SI{50}{\ohm}}
    \label{fig:direct_rx_50_R}
  \end{subfigure}  
  \caption{\SI{20}{\kilo\hertz} Eingangssignal mit unterschiedlichem Lastwiderstand}
  \label{fig:direct_rx}
\end{figure}

Als Empfänger nutzten wir zunächst, zum Testen der Sendeschaltung, eine Photodiode mit Biasspannung und umschaltbarem Lastwiderstand (NewFocus 1623).

In der Abbildung~\ref{fig:direct_rx} kann man die Abhängigkeit des Ausgangssignals vom Lastwiderstand sehen. Dazu wurde der Ausgang der Photodiode mit einem hochohmig terminierten Eingang eines Oszilloskops verbunden und auf den Eingang unserer Sendeschaltung~\ref{sec:direct_tx} ein \SI{20}{\kilo\hertz} Rechtecksignal gegeben. Bei einem hohen Lastwiderstand (\ref{fig:direct_rx_10k_R}) erhöht sich die Verstärkung: die Amplitude ist hier in etwa \SI{10}{\milli\volt}. Jedoch sinkt die Bandbreite, was sich an sehr langen Anstiegs- und Abfallzeiten und der daraus resultierenden Dreiecksform des Ausgangssignals bemerkbar macht. Mit einem kleineren Lastwiderstand (\ref{fig:direct_rx_50_R}) ergibt sich ein weniger verzerrtes Signal, die Amplitude beträgt jedoch nur noch in etwa \SI{1}{\milli\volt}.

Die kleinen Amplituden und die Verzerrung beim Empfang eines \SI{20}{\kilo\hertz} Signals weisen darauf hin, dass für schnellere Signale ein besserer Verstärker benötigt wird.

\subsection{Empfänger mit integriertem \textit{AD8015} Transimpedanzverstärker}
Anstatt selbst eine Empfängerschaltung aufzubauen, bietet es sich an, einen integrierten Transimpedanzverstärker wie den \textit{AD8015} zu benutzen. Dieser ist von Grund auf dazu konzipiert, den Photostrom in eine proportional verstärkte Spannung zu wandeln, welche differentiell mit 50 Ohm Impedanz am Ausgang abgegriffen werden kann. Dieser benötigt nur wenige externe Komponenten was zu einer einfachen Schaltung führt (\ref{fig:receiver_sch})


\begin{figure}[H]
  \centering
    \includegraphics[width=0.7\textwidth]{img/receiver.pdf}
  \caption{Beschaltung des \textit{AD8015} Transimpedanzverstärkers}
  \label{fig:receiver_sch}
\end{figure}

Mit diesem Aufbau lassen sich auch schnelle Signale verstärken was in der Betrachtung der Augendiagramme zu sehen ist.


\subsection{Augendiagramme}
\label{sec:eye_diag}
Augendiagramme können mit dem Oszilloskop aufgenommen werden. Hierzu wird der Trigger auf steigende und fallende Flanken des Signals eingestellt und Persistenz aktiviert. Hierdurch erhält man eine Überlagerung von steigenden und fallenden Flanken. Verbleibt zwischen diesen eine klar erkennbare Öffnung (das Auge), dann kann man davon ausgehen, dass die Bits auch von einer Empfängerschaltung richtig interpretiert werden können. Wichtig ist, als Eingangssignal eine Zufallssequenz von Bits zu wählen, damit sich das System nicht einfach auf eine Frequenz einschwingt.

\begin{figure}[H]
  \centering
    \includegraphics[width=0.7\textwidth]{../photos/IMG_20140710_184030.jpg}
  \caption{Versuchsaufbau zur Bestimmung der Augendiagramme.}
  \label{fig:eye_setup}
\end{figure}

In unserem Fall wurden die Augendiagramme in Abbildung~\ref{fig:eye_plots_slow} und Abbildung~\ref{fig:eye_plots_fast} mit der Sendeschaltung aus Abschnitt~\ref{sec:direct_tx} und der Empfängerschaltung mit dem \textit{AD8015} TIA aufgenommen. Der Aufbau ist in Abbildung~\ref{fig:eye_setup} zu sehen.

\begin{figure}[H]
  \centering
  \begin{subfigure}[b]{0.6\textwidth}
    \includegraphics[width=\textwidth]{../measurements/20140710/eye_plots/01MHz.png}
    \caption{\SI{1}{\mega\hertz}}
  \end{subfigure}  
  \begin{subfigure}[b]{0.6\textwidth}
    \includegraphics[width=\textwidth]{../measurements/20140710/eye_plots/10MHz.png}
    \caption{\SI{10}{\mega\hertz}}
  \end{subfigure}  
  \caption{Augendiagramme}
  \label{fig:eye_plots_slow}
\end{figure}

\begin{figure}[H]
  \centering
  \begin{subfigure}[b]{0.6\textwidth}
    \includegraphics[width=\textwidth]{../measurements/20140710/eye_plots/30MHz.png}
    \caption{\SI{30}{\mega\hertz}}
  \end{subfigure}  
  \begin{subfigure}[b]{0.6\textwidth}
    \includegraphics[width=\textwidth]{../measurements/20140710/eye_plots/50MHz.png}
    \caption{\SI{50}{\mega\hertz}}
  \end{subfigure}  
  \caption{Augendiagramme}
  \label{fig:eye_plots_fast}
\end{figure}



Ein \SI{1}{\mega\hertz} Bitsignal wird ohne Probleme übertragen, auch bei einem \SI{10}{\mega\hertz} Signal ist die Augenöffnung noch unproblematisch. Ein \SI{30}{\mega\hertz} Signal hat bereits eine deutlich kleiner Öffnung, sollte aber auch noch funktionieren. Bei einem \SI{50}{\mega\hertz} Signal scheint die Grenze erreicht; hier ist keine distinkte Öffnung mehr zu erkennen. 

\subsection{Ergebnisse}
Mit dem System aus selbst gebauter modulierbarer Stromquelle und \textit{AD8015} Verstärker lassen sich mit Signale mit einer Geschwindigkeit von bis zu \SI{50}{\mega\hertz} gut übertragen. Die Diode ohne Verstärker ist in diesem Geschwindigkeitsbereich eher nicht mehr zu gebrauchen.

Bezüglich der Sendeschaltung sollte man als nächstes versuchen, diese, wie oben genannt, zu verbessern um dann eine Platine mit dieser aufzubauen. Zusammen mit einem Gehäuse lässt sich damit ein Versuchsaufbau erstellen, mit dem die Schaltung noch besser untersucht und der Laser auch in eine Glasfaser eingekoppelt werden kann.

Der Empfänger mit \textit{AD8015} hat sich bewährt und muss wohl erst einmal nicht verändert werden. Es wäre aber interessant diesen noch besser zu vermessen. Unter anderem sollte mit einer professionellen Lichtquelle untersucht werden, bis zu welchen Frequenzen verstärkt werden kann. Bisher wurde hier nur das Gesamtsystem aus Empfänger und Sender untersucht, was es erschwert, eindeutige Aussagen über die Einzelkomponente zu machen. Interessant könnte es auch sein, die \textit{AD8015} Schaltung mit verschiedenen Photodioden aufzubauen und zu untersuchen, wie sich diese auf das Verstärkungsverhalten auswirken.

\section{Fazit}

Auch wenn, insbesondere mit dem LCD, keine besonders großen Erfolge erzielt wurden, so war dies doch ein sehr interessantes und lehrreiches Praktikum.
Es wurde klar, dass die Beschreibung als LTI System nur eine Näherung ist, welche sich nicht unbedingt gut auf das LCD übertragen lässt. Daraus folgt, dass es wichtig ist, mit Zufallsbitfolgen zu messen um ein Einschwingen zu verhindern. Auch bedeutet ein hörbarer Sinuston, der sich übertragen lässt noch lange nicht, dass man dynamische Musiksignale übertragen kann.

Im Nachhinein fallen einem zahlreiche Dinge ein, die man hätte besser machen können. So sei Studenten, die in Zukunft dieses Praktikum durchführen, empfohlen von Anfang an strukturiert vorzugehen. So sollte man sich erst überlegen, welche Kenndaten des LCDs benötigt werden, dann wie diese zu messen sind. Des Weiteren ist es wichtig, den Aufbau genau zu dokumentieren um Wiederholbarkeit sicherzustellen. So haben wir es leider verpasst den genauen Aufbau bei Aufnahme der Übertragungsfunktion festzuhalten.
Auch wäre es noch interessant gewesen ein paar Messreihen mit Verschiedener Ansteuerung des LCDs aufzunehmen. Hier wäre Latenz (also Gruppenlaufzeit) und Amplitudenübertragungsfunktion interessant. Unter anderem könnte man den LCD mit verschiedenen Amplituden und mit oder ohne hochfrequenter Trägerfrequenz ansteuern.

Interessant war auch jeden Fall der praktische Einsatz von Kenntnissen aus \textit{Grundgebiete der Informatik \rom{2}} bei der Übertragung von Daten mittels eines Hammingcodes. Hier zeigte sich, dass eine niedrigere Datenrate effizienter sein kann, da weniger Paritätsbits benötigt werden. Für die Übertragung von digitalen Daten wäre es bei einer erneuten Durchführung des Praktikums interessant, nach Charakterisierung des LCDs, eine Übertragungsstrecke mit niedrigerer Latenz zu konstruieren.

Bei der direkten Modulation des Lasers empfiehlt es sich, wie oben genannt, die Schaltung des Senders zu optimieren und dann fest aufzubauen, um besser Messungen durchführen zu können. Beim Empfänger mit \textit{AD8015} sollte man Messungen mit einer modulierten Lichtquelle, deren Bandbreite bekannt ist, durchführen, um dessen Maximale Bandbreite auszutesten.

Gelohnt hat sich auf jeden Fall auch, in der Exkursionswoche für zwei ganze Tage am Projekt zu arbeiten. So kann man auch einmal etwas größere Schritte fertig bekommen, ohne sich jede Woche erneut hineindenken zu müssen. Wir raten aber davon ab, dass Praktikum an einem Stück durchziehen zu wollen, da dann nicht genug Zeit ist um Teile zu bestellen oder Platinen zu fertigen.

Zu guter Letzt möchten wir den zukünftigen Teilnehmern dieses Praktikums, viel Erfolg wünschen. Ihr könnt euch auf jeden Fall auf die Unterstützung des Instituts verlassen. Egal ob Ihr Fragen habt, Hilfe oder Teile für die Durchführung braucht. Wendet euch einfach an euren Betreuer.

Wir hoffen euch mit unserem Projektbericht geholfen zu haben und würden uns freuen eure Ergebnisse in einem Jahr begutachten zu können.

Viel Spaß!

\appendix
\section{C++ Quellcode Ausschnitte}
\label{app:code}

\subsection{Hamming Code}
\label{app:code_hamming}
\inputminted[label=hamming.hpp,linenos,tabsize=4,fontsize=\normalsize,frame=lines,rulecolor=\color{gray!70},framerule=1pt]{c++}{../stm32/lcd_transmitter/hamming.hpp}
\url{https://github.com/ekiwi/iph/blob/master/stm32/lcd\_transmitter/hamming.hpp}

\subsection{Software UART: Quelle}
\inputminted[label=transmitter.cpp,linenos,tabsize=4,fontsize=\normalsize,frame=lines,rulecolor=\color{gray!70},framerule=1pt]{c++}{../stm32/lcd_transmitter/source/transmitter.cpp}
\url{https://github.com/ekiwi/iph/blob/master/stm32/lcd\_transmitter/source/transmitter.cpp}

\subsection{Software UART: Empfänger}
\label{app:uart_receiver}
\inputminted[label=receiver.cpp,linenos,tabsize=4,fontsize=\normalsize,frame=lines,rulecolor=\color{gray!70},framerule=1pt]{c++}{../stm32/lcd_transmitter/sink/receiver.cpp}
\url{https://github.com/ekiwi/iph/blob/master/stm32/lcd\_transmitter/sink/receiver.cpp}

\end{document}
